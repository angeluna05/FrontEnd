"use strict";(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[1393],{1393:(A,M,c)=>{c.r(M),c.d(M,{EncargadosModule:()=>ce});var u=c(6814),_=c(965),d=c(6223),C=c(4807),q=c(6208),p=c(9862),h=c(6505),f=c(1659),e=c(5879);let Z=(()=>{class n{constructor(){this.numbers=[1,2,3,4,5]}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-table-components"]],decls:0,vars:0,template:function(o,r){}})}return n})();var T=c(4469),b=c(5619),N=c(8645),J=c(2096),x=c(9397),U=c(3620),w=c(4664),y=c(5177),Q=c(4414);function $(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"ngb-highlight",31),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngb-highlight",31),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngb-highlight",31),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"ngb-highlight",31),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"ngb-highlight",31),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"ngb-highlight",31),e.qZA(),e.TgZ(13,"td")(14,"div",32)(15,"ul",33)(16,"li",34)(17,"a",35),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(),i=e.MAs(53);return e.KtG(l.Editar(i,a))}),e.TgZ(18,"span",36),e._UZ(19,"i",37),e.qZA()()(),e.TgZ(20,"li",38)(21,"a",35),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.withConfirmation(a))}),e.TgZ(22,"span",36),e._UZ(23,"i",39),e.qZA()()()()()()()}if(2&n){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Q6J("result",t.nombre)("term",o.searchTerm),e.xp6(2),e.Q6J("result",t.apellido)("term",o.searchTerm),e.xp6(2),e.Q6J("result",t.numeroContacto)("term",o.searchTerm),e.xp6(2),e.Q6J("result",t.documento)("term",o.searchTerm),e.xp6(2),e.Q6J("result",t.cargo)("term",o.searchTerm),e.xp6(2),e.Q6J("result",t.estadoid.nombre)("term",o.searchTerm)}}function k(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.nombre," ")}}function O(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.apellido," ")}}function D(n,s){if(1&n&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.siglas)}}function K(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.documento," ")}}function F(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.fechaNacimiento," ")}}function S(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.numeroContacto," ")}}function V(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.cargo," ")}}function j(n,s){if(1&n&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.nombre)}}const E=function(n){return{"was-validated":n}},g=function(n){return{"is-invalid":n}};function H(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"h4",41),e._uU(2,"Registrar encargado"),e.qZA(),e.TgZ(3,"button",42),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",43)(5,"div",4)(6,"div",44)(7,"form",45)(8,"div",46)(9,"div",47)(10,"label",48),e._uU(11,"Nombre"),e.TgZ(12,"span",49),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"input",50),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.nombre=r)}),e.qZA(),e.YNc(15,k,2,1,"div",51),e.qZA(),e.TgZ(16,"div",47)(17,"label",52),e._uU(18,"Apellido"),e.TgZ(19,"span",49),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"input",53),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.apellido=r)}),e.qZA(),e.YNc(22,O,2,1,"div",51),e.qZA(),e.TgZ(23,"div",47)(24,"label",54),e._uU(25,"Tipo de Documento"),e.TgZ(26,"span",49),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"select",55),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.tipoDocumentoid=r)}),e.TgZ(29,"option",56),e._uU(30,"Escoge una opci\xf3n"),e.qZA(),e.YNc(31,D,2,2,"option",57),e.qZA(),e.TgZ(32,"div",58),e._uU(33,"Por favor, selecciona un Tipo de documento v\xe1lido."),e.qZA()(),e.TgZ(34,"div",47)(35,"label",59),e._uU(36,"Documento"),e.TgZ(37,"span",49),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"input",60),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.documento=r)}),e.qZA(),e.YNc(40,K,2,1,"div",51),e.qZA(),e.TgZ(41,"div",47)(42,"label",61),e._uU(43,"Fecha de Nacimiento"),e.TgZ(44,"span",49),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"input",62),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.fechaNacimiento=r)}),e.qZA(),e.YNc(47,F,2,1,"div",51),e.qZA(),e.TgZ(48,"div",47)(49,"label",63),e._uU(50,"N\xfamero de Contacto"),e.TgZ(51,"span",49),e._uU(52,"*"),e.qZA()(),e.TgZ(53,"input",64),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.numeroContacto=r)}),e.qZA(),e.YNc(54,S,2,1,"div",51),e.qZA(),e.TgZ(55,"div",47)(56,"label",65),e._uU(57,"Cargo"),e.TgZ(58,"span",49),e._uU(59,"*"),e.qZA()(),e.TgZ(60,"input",66),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.cargo=r)}),e.qZA(),e.YNc(61,V,2,1,"div",51),e.qZA(),e.TgZ(62,"div",47)(63,"label",67),e._uU(64,"Empresa"),e.TgZ(65,"span",49),e._uU(66,"*"),e.qZA()(),e.TgZ(67,"select",68),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.newEncargado.empresaid=r)}),e.YNc(68,j,2,2,"option",57),e.qZA(),e.TgZ(69,"div",58),e._uU(70,"Por favor, selecciona una Empresa v\xe1lida."),e.qZA()()()()()()(),e.TgZ(71,"div",69)(72,"button",70),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.close())}),e._uU(73,"Cancelar"),e.qZA(),e.TgZ(74,"button",71),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createEncargado())}),e._uU(75,"Guardar"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngClass",e.VKq(24,E,t.validate)),e.xp6(7),e.Q6J("ngModel",t.newEncargado.nombre)("ngClass",e.VKq(26,g,null==t.errorMessages?null:t.errorMessages.nombre)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.nombre),e.xp6(6),e.Q6J("ngModel",t.newEncargado.apellido)("ngClass",e.VKq(28,g,null==t.errorMessages?null:t.errorMessages.apellido)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.apellido),e.xp6(6),e.Q6J("ngModel",t.newEncargado.tipoDocumentoid),e.xp6(3),e.Q6J("ngForOf",t.tiposDocumentos),e.xp6(8),e.Q6J("ngModel",t.newEncargado.documento)("ngClass",e.VKq(30,g,null==t.errorMessages?null:t.errorMessages.documento)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.documento),e.xp6(6),e.Q6J("ngModel",t.newEncargado.fechaNacimiento)("ngClass",e.VKq(32,g,null==t.errorMessages?null:t.errorMessages.fechaNacimiento)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.fechaNacimiento),e.xp6(6),e.Q6J("ngModel",t.newEncargado.numeroContacto)("ngClass",e.VKq(34,g,null==t.errorMessages?null:t.errorMessages.numeroContacto)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.numeroContacto),e.xp6(6),e.Q6J("ngModel",t.newEncargado.cargo)("ngClass",e.VKq(36,g,null==t.errorMessages?null:t.errorMessages.cargo)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.cargo),e.xp6(6),e.Q6J("ngModel",t.newEncargado.empresaid)("ngClass",e.VKq(38,g,null==t.errorMessages?null:t.errorMessages.empresaid)),e.xp6(1),e.Q6J("ngForOf",t.empresas)}}function I(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.nombre," ")}}function G(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.apellido," ")}}function P(n,s){if(1&n&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.siglas)}}function z(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.documento," ")}}function Y(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.fechaNacimiento," ")}}function B(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.numeroContacto," ")}}function L(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.cargo," ")}}function W(n,s){if(1&n&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.nombre)}}function R(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessages.empresaid," ")}}function X(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"h4",41),e._uU(2,"Editar Encargado"),e.qZA(),e.TgZ(3,"button",42),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",43)(5,"div",4)(6,"div",44)(7,"form",45)(8,"div",46)(9,"div",47)(10,"label",72),e._uU(11,"Nombre"),e.TgZ(12,"span",49),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"input",73),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.nombre=r)}),e.qZA(),e.YNc(15,I,2,1,"div",51),e.qZA(),e.TgZ(16,"div",47)(17,"label",74),e._uU(18,"Apellido"),e.TgZ(19,"span",49),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"input",75),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.apellido=r)}),e.qZA(),e.YNc(22,G,2,1,"div",51),e.qZA(),e.TgZ(23,"div",47)(24,"label",76),e._uU(25,"Tipo de Documento"),e.TgZ(26,"span",49),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"select",77),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.tipoDocumentoid.id=r)}),e.TgZ(29,"option",78),e._uU(30,"Escoge una opci\xf3n"),e.qZA(),e.YNc(31,P,2,2,"option",57),e.qZA(),e.TgZ(32,"div",58),e._uU(33,"Por favor, selecciona un Tipo de documento v\xe1lido."),e.qZA()(),e.TgZ(34,"div",47)(35,"label",79),e._uU(36,"Documento"),e.TgZ(37,"span",49),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"input",80),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.documento=r)}),e.qZA(),e.YNc(40,z,2,1,"div",51),e.qZA(),e.TgZ(41,"div",47)(42,"label",81),e._uU(43,"Fecha de Nacimiento"),e.TgZ(44,"span",49),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"input",82),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.fechaNacimiento=r)}),e.qZA(),e.YNc(47,Y,2,1,"div",51),e.qZA(),e.TgZ(48,"div",47)(49,"label",83),e._uU(50,"N\xfamero de Contacto"),e.TgZ(51,"span",49),e._uU(52,"*"),e.qZA()(),e.TgZ(53,"input",84),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.numeroContacto=r)}),e.qZA(),e.YNc(54,B,2,1,"div",51),e.qZA(),e.TgZ(55,"div",47)(56,"label",85),e._uU(57,"Cargo"),e.TgZ(58,"span",49),e._uU(59,"*"),e.qZA()(),e.TgZ(60,"input",86),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.cargo=r)}),e.qZA(),e.YNc(61,L,2,1,"div",51),e.qZA(),e.TgZ(62,"div",47)(63,"label",87),e._uU(64,"Empresa"),e.TgZ(65,"span",49),e._uU(66,"*"),e.qZA()(),e.TgZ(67,"select",88),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedEncargado.empresaid.id=r)}),e.TgZ(68,"option",89),e._uU(69,"Escoge una opci\xf3n"),e.qZA(),e.YNc(70,W,2,2,"option",57),e.qZA(),e.YNc(71,R,2,1,"div",51),e.qZA()()()()()(),e.TgZ(72,"div",69)(73,"button",70),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.dismiss("cancel"))}),e._uU(74,"Cancelar"),e.qZA(),e.TgZ(75,"button",71),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editEncargado())}),e._uU(76,"Actualizar"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngClass",e.VKq(26,E,t.validate)),e.xp6(7),e.Q6J("ngModel",t.selectedEncargado.nombre)("ngClass",e.VKq(28,g,null==t.errorMessages?null:t.errorMessages.nombre)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.nombre),e.xp6(6),e.Q6J("ngModel",t.selectedEncargado.apellido)("ngClass",e.VKq(30,g,null==t.errorMessages?null:t.errorMessages.apellido)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.apellido),e.xp6(6),e.Q6J("ngModel",t.selectedEncargado.tipoDocumentoid.id)("ngClass",e.VKq(32,g,null==t.errorMessages?null:t.errorMessages.tipoDocumentoid)),e.xp6(3),e.Q6J("ngForOf",t.tiposDocumentos),e.xp6(8),e.Q6J("ngModel",t.selectedEncargado.documento)("ngClass",e.VKq(34,g,null==t.errorMessages?null:t.errorMessages.documento)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.documento),e.xp6(6),e.Q6J("ngModel",t.selectedEncargado.fechaNacimiento)("ngClass",e.VKq(36,g,null==t.errorMessages?null:t.errorMessages.fechaNacimiento)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.fechaNacimiento),e.xp6(6),e.Q6J("ngModel",t.selectedEncargado.numeroContacto)("ngClass",e.VKq(38,g,null==t.errorMessages?null:t.errorMessages.numeroContacto)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.numeroContacto),e.xp6(6),e.Q6J("ngModel",t.selectedEncargado.cargo)("ngClass",e.VKq(40,g,null==t.errorMessages?null:t.errorMessages.cargo)),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.cargo),e.xp6(6),e.Q6J("ngModel",t.selectedEncargado.empresaid.id)("ngClass",e.VKq(42,g,null==t.errorMessages?null:t.errorMessages.empresaid)),e.xp6(3),e.Q6J("ngForOf",t.empresas),e.xp6(1),e.Q6J("ngIf",null==t.errorMessages?null:t.errorMessages.empresaid)}}const ee=function(){return["Apps"]},m=c(3519);let te=(()=>{class n{constructor(t,o,r,a){this.service=t,this.http=o,this.modalService=a,this.apiUrl="https://backend-do1k.onrender.com/encargados",this.token=localStorage.getItem("authToken"),this.errorMessages={},this.searchText="",this.validate=!1,this.tooltipValidation=!1,this.estados=[],this.tiposDocumentos=[],this.empresas=[],this.newEncargado={id:null,nombre:"",apellido:"",documento:null,fechaNacimiento:"",numeroContacto:"",cargo:"",tipoDocumentoid:{id:1,siglas:"",descripcion:""},empresaid:{id:1,nombre:""},estadoid:{id:1,nombre:"Activo"}},this.selectedEncargado={...this.newEncargado},this.searchTerm="",this.tableItem$=t.tableItem$,this.total$=t.total$,r.backdrop="static",r.keyboard=!1}onSort({column:t,direction:o}){this.headers.forEach(r=>{r.sortable!==t&&(r.direction="")}),this.service.sortColumn=t,this.service.sortDirection=o}ngOnInit(){this.getEncargados(),this.getEstados(),this.getTiposDocumentos(),this.getEmpresas(),this.service.searchTerm=this.searchTerm}getEstados(){const t=new p.WM({Authorization:`Bearer ${this.token}`});this.http.get("https://backend-do1k.onrender.com/estado",{headers:t}).subscribe(o=>{this.estados=o},o=>{console.error("Error fetching estados:",o)})}getTiposDocumentos(){const t=new p.WM({Authorization:`Bearer ${this.token}`});this.http.get("https://backend-do1k.onrender.com/tipodocumentos",{headers:t}).subscribe(o=>{this.tiposDocumentos=o},o=>{console.error("Error fetching tipos de documentos:",o)})}getEmpresas(){const t=new p.WM({Authorization:`Bearer ${this.token}`});this.http.get("https://backend-do1k.onrender.com/empresas",{headers:t}).subscribe(o=>{this.empresas=o},o=>{console.error("Error fetching empresas:",o)})}getEncargados(){const t=new p.WM({Authorization:`Bearer ${this.token}`});this.http.get(this.apiUrl,{headers:t}).subscribe(o=>{this.service.setUserData(o)},o=>{console.error("Error fetching Encargados:",o)})}createEncargado(){this.validate=!this.validate,this.tooltipValidation=!this.tooltipValidation;const t=new p.WM({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"});this.http.post(this.apiUrl,this.newEncargado,{headers:t}).subscribe(()=>{this.validate=!1,this.tooltipValidation=!1,this.errorMessages="",m.fire({icon:"success",title:"\xa1Registro exitoso!",showConfirmButton:!1,timer:1500}),this.errorMessages={},this.getEncargados(),this.modalService.dismissAll(),this.resetNewEncargado()},o=>{400===o.status&&o.error?this.errorMessages=o.error:500===o.status&&o.error?m.fire("Error",`${o.error.errors.sql_error}.`,"error"):console.error("Error creating encargado:",o)})}editEncargado(t){this.validate=!this.validate,this.tooltipValidation=!this.tooltipValidation;const o=new p.WM({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"});this.http.put(`${this.apiUrl}/${this.selectedEncargado.id}`,this.selectedEncargado,{headers:o}).subscribe(()=>{this.validate=!1,this.tooltipValidation=!1,this.errorMessages="",m.fire({icon:"success",title:"\xa1Edici\xf3n exitosa!",showConfirmButton:!1,timer:1500}),this.errorMessages={},this.getEncargados(),this.modalService.dismissAll()},r=>{400===r.status&&r.error?this.errorMessages=r.error:500===r.status&&r.error?m.fire("Error",`${r.error.errors.sql_error}.`,"error"):console.error("Error editing encargado:",r)})}deleteData(t){const o=new p.WM({Authorization:`Bearer ${this.token}`});this.http.delete(`${this.apiUrl}/${t}`,{headers:o}).subscribe(()=>{this.getEncargados(),m.fire({icon:"success",title:"\xa1Eliminaci\xf3n exitosa!",showConfirmButton:!1,timer:1500})},r=>{console.error("Error deleting encargado:",r),m.fire({icon:"error",title:"Error al eliminar",text:"No se pudo eliminar el encargado. Int\xe9ntalo de nuevo."})})}withConfirmation(t){m.fire({title:"\xbfEst\xe1s seguro?",text:"\xa1No podr\xe1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, cambiar estado",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&this.toggleEstado(t)})}toggleEstado(t){const o=1===t.estadoid.id?2:1,r=new p.WM({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"});this.http.put(`${this.apiUrl}/${t.id}/estado`,o,{headers:r}).subscribe(()=>{t.estadoid.id=o,t.estadoid.nombre=1===o?"Activo":"Inactivo",m.fire("\xa1Estado actualizado!",`El Encargado ahora est\xe1 en estado ${t.estadoid.nombre.toLowerCase()}.`,"success")},a=>{console.error("Error cambiando estado:",a),m.fire({icon:"error",title:"Error",text:"No se pudo actualizar el estado. Int\xe9ntalo de nuevo."})})}onSearchTermChange(){this.service.searchTerm=this.searchTerm}submit(){this.validate=!this.validate}tooltipSubmit(){this.tooltipValidation=!this.tooltipValidation}Crear(t){this.newEncargado={id:null,nombre:"",apellido:"",documento:null,fechaNacimiento:"",numeroContacto:"",cargo:"",tipoDocumentoid:{id:1,siglas:"",descripcion:""},empresaid:{id:1,nombre:""},estadoid:{id:1,nombre:"Activo"}},this.modalService.open(t,{backdropClass:"light-blue-backdrop"})}Editar(t,o){this.selectedEncargado={...o},this.modalService.open(t,{backdropClass:"light-blue-backdrop"})}resetNewEncargado(){this.newEncargado={id:0,nombre:"",apellido:"",documento:0,fechaNacimiento:"",numeroContacto:"",cargo:"",tipoDocumentoid:{id:1,siglas:"",descripcion:""},empresaid:{id:1,nombre:""},estadoid:{id:1,nombre:"Activo"}}}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(ae),e.Y36(p.eN),e.Y36(_.NM),e.Y36(_.FF))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-encargados"]],viewQuery:function(o,r){if(1&o&&e.Gf(T.j,5),2&o){let a;e.iGM(a=e.CRH())&&(r.headers=a)}},decls:54,vars:17,consts:[[3,"title","items","active_item"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body","custom-datatable","noscroll"],[1,"custom-datatable","table-responsive"],[1,"file-content"],[1,"media"],["action","#","method","get",1,"form-inline"],[1,"form-group","mb-0","text-end"],[1,"fa","fa-search"],["type","text","placeholder","Buscar...",1,"form-control-plaintext",3,"ngModel","ngModelChange","input"],[1,"media-body","text-end"],["type","button",1,"btn","btn-pill","btn-primary",3,"click"],[1,"table"],["scope","col","sortable","nombre",3,"sort"],["scope","col","sortable","apellido",3,"sort"],["scope","col","sortable","numeroContacto",3,"sort"],["scope","col","sortable","documento",3,"sort"],["scope","col","sortable","cargo",3,"sort"],["scope","col","sortable","estado.nombre",3,"sort"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],["name","pageSize",1,"form-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"ms-3",3,"collectionSize","page","pageSize","pageChange"],["createModal",""],["content1",""],[3,"result","term"],[1,"action"],[1,"action-icons"],[1,"edit"],[3,"click"],[1,"icon-circle"],[1,"fa","fa-pencil-square-o"],[1,"status"],[1,"icofont","icofont-retweet"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"card-body"],["novalidate","",1,"needs-validation",3,"ngClass"],[1,"row","g-3"],[1,"col-md-6"],["for","createNombre",1,"form-label"],[1,"red-asterisk"],["id","createNombre","type","text","placeholder","Nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["for","createApellido",1,"form-label"],["id","createApellido","type","text","placeholder","Apellido","name","apellido","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","createTipoDocumento",1,"form-label"],["id","createTipoDocumento","required","",1,"form-select",3,"ngModel","ngModelChange"],["selected","","disabled","","value",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["for","createDocumento",1,"form-label"],["id","createDocumento","type","number","placeholder","Documento","name","documento","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","createFechaNacimiento",1,"form-label"],["id","createFechaNacimiento","type","date","placeholder","Fecha de Nacimiento","name","fechaNacimiento","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","createNumeroContacto",1,"form-label"],["id","createNumeroContacto","type","number","placeholder","N\xfamero de Contacto","name","numeroContacto","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","createCargo",1,"form-label"],["id","createCargo","type","text","placeholder","Cargo","name","cargo","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","createEmpresa",1,"form-label"],["id","createEmpresa","name","empresaid","required","",1,"form-select",3,"ngModel","ngClass","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["for","editNombre",1,"form-label"],["id","editNombre","type","text","placeholder","Nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","editApellido",1,"form-label"],["id","editApellido","type","text","placeholder","Apellido","name","apellido","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","editTipoDocumento",1,"form-label"],["id","editTipoDocumento","name","tipoDocumentoid","required","",1,"form-select",3,"ngModel","ngClass","ngModelChange"],["value","","selected","","disable",""],["for","editDocumento",1,"form-label"],["id","editDocumento","type","number","placeholder","Documento","name","documento","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","editFechaNacimiento",1,"form-label"],["id","editFechaNacimiento","type","date","placeholder","Fecha de Nacimiento","name","fechaNacimiento","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","editNumeroContacto",1,"form-label"],["id","editNumeroContacto","type","number","placeholder","N\xfamero de Contacto","name","numeroContacto","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","editCargo",1,"form-label"],["id","editCargo","type","text","placeholder","Cargo","name","cargo","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["for","editEmpresa",1,"form-label"],["id","editEmpresa","name","empresaid","required","",1,"form-select",3,"ngModel","ngClass","ngModelChange"],["value",""]],template:function(o,r){if(1&o){const a=e.EpF();e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5"),e._uU(7,"Encargados"),e.qZA()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",5)(12,"div",9)(13,"form",10)(14,"div",11),e._UZ(15,"i",12),e.TgZ(16,"input",13),e.NdJ("ngModelChange",function(i){return r.searchTerm=i})("input",function(){return r.onSearchTermChange()}),e.qZA()()(),e.TgZ(17,"div",14)(18,"button",15),e.NdJ("click",function(){e.CHM(a);const i=e.MAs(51);return e.KtG(r.Crear(i))}),e._uU(19,"Registrar encargado"),e.qZA()()()()(),e.TgZ(20,"table",16)(21,"thead")(22,"tr")(23,"th",17),e.NdJ("sort",function(i){return r.onSort(i)}),e._uU(24,"Nombre"),e.qZA(),e.TgZ(25,"th",18),e.NdJ("sort",function(i){return r.onSort(i)}),e._uU(26,"Apellido"),e.qZA(),e.TgZ(27,"th",19),e.NdJ("sort",function(i){return r.onSort(i)}),e._uU(28,"N\xfamero de Contacto"),e.qZA(),e.TgZ(29,"th",20),e.NdJ("sort",function(i){return r.onSort(i)}),e._uU(30,"Documento"),e.qZA(),e.TgZ(31,"th",21),e.NdJ("sort",function(i){return r.onSort(i)}),e._uU(32,"Cargo"),e.qZA(),e.TgZ(33,"th",22),e.NdJ("sort",function(i){return r.onSort(i)}),e._uU(34,"Estado"),e.qZA(),e.TgZ(35,"th",23),e._uU(36,"Acciones"),e.qZA()()(),e.TgZ(37,"tbody"),e.YNc(38,$,24,12,"tr",24),e.ALo(39,"async"),e.qZA()(),e.TgZ(40,"div",25)(41,"select",26),e.NdJ("ngModelChange",function(i){return r.service.pageSize=i}),e.TgZ(42,"option",27),e._uU(43,"2 items per page"),e.qZA(),e.TgZ(44,"option",27),e._uU(45,"4 items per page"),e.qZA(),e.TgZ(46,"option",27),e._uU(47,"6 items per page"),e.qZA()(),e.TgZ(48,"ngb-pagination",28),e.NdJ("pageChange",function(i){return r.service.page=i}),e.ALo(49,"async"),e.qZA()()()()()()()(),e.YNc(50,H,76,40,"ng-template",null,29,e.W1O),e.YNc(52,X,77,44,"ng-template",null,30,e.W1O)}2&o&&(e.Q6J("title","Encargados")("items",e.DdM(16,ee))("active_item","Encargados"),e.xp6(16),e.Q6J("ngModel",r.searchTerm),e.xp6(22),e.Q6J("ngForOf",e.lcZ(39,12,r.tableItem$)),e.xp6(3),e.Q6J("ngModel",r.service.pageSize),e.xp6(1),e.Q6J("ngValue",2),e.xp6(2),e.Q6J("ngValue",4),e.xp6(2),e.Q6J("ngValue",6),e.xp6(2),e.Q6J("collectionSize",e.lcZ(49,14,r.total$))("page",r.service.page)("pageSize",r.service.pageSize))},dependencies:[u.mk,u.sg,u.O5,d._Y,d.YN,d.Kr,d.Fj,d.wV,d.EJ,d.JJ,d.JL,d.Q7,d.On,d.F,_.N9,_._h,Q.L,T.j,u.Ov],styles:['@charset "UTF-8";.action-icons[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0;display:flex;justify-content:center;align-items:center;gap:15px}.red-asterisk[_ngcontent-%COMP%]{color:red}.action-icons[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:pointer}.icon-circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:35px;height:35px;border-radius:50%;transition:all .3s ease}.icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;font-size:18px;display:flex;align-items:center;justify-content:center}.edit[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{background-color:#ffeeba}.delete[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{background-color:#f8d7da}.status[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{background-color:#d4edda}.download[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{background-color:#ffc977}.action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .icon-circle[_ngcontent-%COMP%]{transform:scale(1.1);box-shadow:0 0 10px #0000001a}li.status[_ngcontent-%COMP%]:last-child   .icon-circle[_ngcontent-%COMP%]{background-color:#cce5ff}td[_ngcontent-%COMP%]{padding:10px;text-align:center}.action[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']})}return n})();function v(n,s){return s.split(".").reduce((t,o)=>t&&t[o],n)}let ae=(()=>{class n{constructor(t){this.pipe=t,this._loading$=new b.X(!0),this._search$=new N.x,this._tableItem$=new b.X([]),this._total$=new b.X(0),this.userData=[],this._state={page:1,pageSize:4,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,x.b)(()=>this._loading$.next(!0)),(0,U.b)(200),(0,w.w)(()=>this._search()),(0,y.g)(200),(0,x.b)(()=>this._loading$.next(!1))).subscribe(o=>{this._tableItem$.next(o.tableItem),this._total$.next(o.total)}),this._search$.next()}get tableItem$(){return this._tableItem$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(t){this._set({page:t})}set pageSize(t){this._set({pageSize:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}setUserData(t){this.userData=t,this._search$.next()}deleteSingleData(t){const o=this.userData.findIndex(r=>r.id.toString()===t);o>-1&&(this.userData.splice(o,1),this._search$.next())}_set(t){Object.assign(this._state,t),this._search$.next()}set searchTerm(t){this._set({searchTerm:t})}_search(){const{sortColumn:t,sortDirection:o,pageSize:r,page:a,searchTerm:l}=this._state;let i=function ne(n,s,t){return""===t||""===s?n:[...n].sort((o,r)=>{const a=((n,s)=>n<s?-1:n>s?1:0)(v(o,s),v(r,s));return"asc"===t?a:-a})}(this.userData,t,o);i=i.filter(de=>function re(n,s,t){if(!s)return!0;const o=s.toLowerCase();return n.nombre.toLowerCase().includes(o)||n.apellido.toLowerCase().includes(o)||n.numeroContacto.toLowerCase().includes(o)||n.documento.toString().includes(o)||n.cargo.toLowerCase().includes(o)||n.tipoDocumentoid.siglas.toLowerCase().includes(o)||n.estadoid.nombre.toLowerCase().includes(o)}(de,l));const le=i.length;return i=i.slice((a-1)*r,(a-1)*r+r),(0,J.of)({tableItem:i,total:le})}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(u.JJ))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const se=[{path:"",children:[{path:"bootstrap-tables",children:[{path:"basic",component:f.A},{path:"table-components",component:Z}]},{path:"",component:te}]}];let ie=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(se),h.Bz]})}return n})(),ce=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[u.ez,ie,d.u5,p.JF,d.UX,_.IJ,q.m,C.A0]})}return n})()},4469:(A,M,c)=>{c.d(M,{j:()=>d});var u=c(5879);const _={asc:"desc",desc:"","":"asc"};let d=(()=>{class C{constructor(){this.sortable="",this.direction="",this.sort=new u.vpe}rotate(){console.info("clicked: "),this.direction=_[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static#e=this.\u0275fac=function(h){return new(h||C)};static#t=this.\u0275dir=u.lG2({type:C,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(h,f){1&h&&u.NdJ("click",function(Z){return f.rotate(Z)}),2&h&&u.ekj("asc","asc"===f.direction)("desc","desc"===f.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}return C})()}}]);